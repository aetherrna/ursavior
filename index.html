<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URSAVIOR Profile</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Poppins', sans-serif; }
        
        /* Glassmorphism */
        .glass-card {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Grid Overlay */
        .grid-overlay {
            background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 30px 30px;
        }

        /* Animations */
        .blink-text { animation: blinker 2s linear infinite; }
        @keyframes blinker { 50% { opacity: 0.3; } }

        .fade-out {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.8s ease-out, visibility 0.8s ease-out;
        }

        .content-hidden {
            opacity: 0;
            transform: translateY(30px);
        }
        .content-visible {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out; 
        }

        /* --- EFEK NAMA SHIMMER & BINTANG --- */
        .starry-text {
            position: relative;
            background: linear-gradient(90deg, #fff, #888, #fff);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s linear infinite;
            display: inline-block;
        }

        @keyframes shimmer {
            to { background-position: 200% center; }
        }

        .starry-text::before, .starry-text::after {
            content: 'âœ¦';
            position: absolute;
            top: 0;
            color: white;
            font-size: 1.5rem;
            -webkit-text-fill-color: white;
            animation: twinkle 2s ease-in-out infinite alternate;
        }

        .starry-text::before {
            left: -20px;
            top: -10px;
            font-size: 1rem;
            animation-delay: 0.5s;
        }

        .starry-text::after {
            right: -20px;
            bottom: 5px;
            font-size: 1.2rem;
            animation-delay: 1s;
        }

        @keyframes twinkle {
            0% { opacity: 0.2; transform: scale(0.8) rotate(0deg); }
            100% { opacity: 1; transform: scale(1.2) rotate(45deg); text-shadow: 0 0 10px white; }
        }

        .hidden { display: none !important; }
    </style>
</head>
<body class="bg-black text-white h-screen w-full overflow-hidden relative">

    <div class="fixed inset-0 z-0">
        <video autoplay loop muted playsinline class="w-full h-full object-cover opacity-60">
            <source src="1.mp4" type="video/mp4">
        </video>
        <div class="absolute inset-0 bg-black/40 grid-overlay z-10"></div>
    </div>


    <div id="click-overlay" class="fixed inset-0 z-[100] bg-black flex flex-col justify-center items-center cursor-pointer">
        <h1 class="text-2xl md:text-3xl font-bold tracking-widest blink-text select-none text-white">
            click to enter...
        </h1>
        <p class="text-gray-500 text-xs mt-2 tracking-widest uppercase opacity-50">( click anywhere )</p>
    </div>


    <div id="main-content" class="relative z-20 h-full flex flex-col justify-center items-center text-center px-4 content-hidden">
        
        <div class="absolute top-5 left-5">
            <button id="audioControl" class="text-white/50 hover:text-white transition text-xl">
                <i class="fa-solid fa-volume-high" id="audioIcon"></i>
            </button>
        </div>

        <div class="mb-5 relative group">
            <div class="absolute -inset-1 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full blur opacity-25 group-hover:opacity-75 transition duration-1000 group-hover:duration-200"></div>
            <img src="foto1.jpeg" 
                 alt="Profile" 
                 class="relative w-28 h-28 md:w-32 md:h-32 rounded-full object-cover border-2 border-white/10 shadow-2xl">
        </div>

        <h1 class="text-4xl md:text-6xl font-bold tracking-tight mb-2">
            <span class="starry-text">URSAVIOR</span>
        </h1>

        <p class="text-sm text-gray-300 max-w-md mb-8 font-light tracking-wide leading-relaxed">
            "Merangkai sunyi menjadi sistem. Tak terlihat di layar, namun menjadi nyawa di setiap perintah."
        </p>

        <div class="flex gap-8 text-2xl mb-10">
            <a href="https://discord.com/users/970145547191205938" class="text-gray-400 hover:text-white hover:scale-110 transition duration-300" target="_blank"><i class="fa-brands fa-discord" ></i></a>
            <a href="https://www.instagram.com/urs4vior?igsh=ajBhdXNkNDg2d2Nt&utm_source=qr" class="text-gray-400 hover:text-white hover:scale-110 transition duration-300" target="_blank"><i class="fa-brands fa-instagram"></i></a>
            <a href="https://open.spotify.com/user/31eonz44e352p2uu2yyq42tsc7my?si=ca-4T6wNSxCmCDNPBnH6zA" class="text-gray-400 hover:text-white hover:scale-110 transition duration-300" target="_blank"><i class="fa-brands fa-spotify"></i></a>
            <a href="https://www.tiktok.com/@aetherrr.rr?_r=1&_t=ZS-91WsgUB5iwE" class="text-gray-400 hover:text-white hover:scale-110 transition duration-300" target="_blank"><i class="fa-brands fa-tiktok"></i></a>
        </div>

        <div id="status-card" class="glass-card rounded-lg p-3 flex items-center gap-3 w-auto min-w-[300px] md:min-w-[350px] mx-auto hover:bg-white/5 transition cursor-default">
            
            <div class="relative shrink-0">
                <img id="discord-pfp-img" src="" alt="DS" class="w-10 h-10 rounded-full border border-white/20 shadow-sm object-cover bg-gray-800">
                <div id="discord-status-dot" class="absolute bottom-0 right-0 w-3 h-3 bg-gray-500 rounded-full border-2 border-black"></div>
            </div>

            <div class="w-[1px] h-8 bg-white/10 mx-1"></div>

            <div id="spotify-content" class="flex items-center gap-3 flex-1 hidden">
                <div class="w-10 h-10 bg-gray-700 rounded-md overflow-hidden relative shrink-0 shadow-lg">
                    <img id="spotify-art" src="" class="w-full h-full object-cover animate-[spin_8s_linear_infinite]">
                </div>
                <div class="text-left overflow-hidden flex-1 min-w-0">
                    <p class="text-[10px] text-green-400 font-bold uppercase tracking-wider mb-0.5">Listening now</p>
                    <p id="spotify-song" class="text-xs text-white font-bold truncate">Song Name</p>
                    <p id="spotify-artist" class="text-[10px] text-gray-400 truncate">Artist</p>
                </div>
                <div class="ml-2 flex gap-1 h-3 items-end">
                    <div class="w-1 bg-green-500 h-full animate-pulse"></div>
                    <div class="w-1 bg-green-500 h-2/3 animate-pulse delay-75"></div>
                    <div class="w-1 bg-green-500 h-full animate-pulse delay-150"></div>
                </div>
            </div>

            <div id="spotify-idle" class="flex items-center gap-3 flex-1">
                <div class="w-8 h-8 flex items-center justify-center text-gray-500">
                    <i class="fa-brands fa-spotify text-xl"></i>
                </div>
                <div class="text-left">
                    <p class="text-xs text-gray-400 font-bold">Vibing in Silence</p>
                    <p class="text-[10px] text-gray-600">Spotify idle</p>
                </div>
            </div>
        </div>

        <div class="absolute bottom-6 text-[10px] text-gray-500 font-mono tracking-widest flex items-center gap-2 glass-card px-3 py-1 rounded-full">
            <i class="fa-solid fa-eye animate-pulse text-purple-400"></i> 
            <span id="visit-count" class="text-white font-bold">...</span>
        </div>

    </div>

    <audio id="bgMusic" loop>
        <source src="backsound.mp3" type="audio/mpeg">
    </audio>


    <script>
        const DISCORD_USER_ID = "970145547191205938"; 
        
        const overlay = document.getElementById('click-overlay');
        const mainContent = document.getElementById('main-content');
        const audio = document.getElementById('bgMusic');
        const audioControl = document.getElementById('audioControl');
        const audioIcon = document.getElementById('audioIcon');
        
        const spotifyContent = document.getElementById('spotify-content');
        const spotifyIdle = document.getElementById('spotify-idle');
        const spotifyArt = document.getElementById('spotify-art');
        const spotifySong = document.getElementById('spotify-song');
        const spotifyArtist = document.getElementById('spotify-artist');
        
        const discordPfpImg = document.getElementById('discord-pfp-img');
        const discordStatusDot = document.getElementById('discord-status-dot');

        // 1. CLICK TO ENTER
        overlay.addEventListener('click', () => {
            overlay.classList.add('fade-out');
            audio.volume = 0.5; 
            audio.play().catch(console.error);
            setTimeout(() => {
                mainContent.classList.remove('content-hidden');
                mainContent.classList.add('content-visible');
            }, 200);
            setTimeout(() => { overlay.style.display = 'none'; }, 800); 
        });

        // 2. AUDIO CONTROL
        audioControl.addEventListener('click', () => {
            if (audio.paused) {
                audio.play();
                audioIcon.classList.replace('fa-volume-xmark', 'fa-volume-high');
            } else {
                audio.pause();
                audioIcon.classList.replace('fa-volume-high', 'fa-volume-xmark');
            }
        });

        // 3. REALTIME DISCORD & SPOTIFY
        async function updateStatus() {
            try {
                const response = await fetch(`https://api.lanyard.rest/v1/users/${DISCORD_USER_ID}`);
                const json = await response.json();
                
                if (!json.success) return; 

                const data = json.data;
                const spotify = data.listening_to_spotify ? data.spotify : null;
                const discordUser = data.discord_user;
                const discordStatus = data.discord_status;

                // Update Discord PFP
                if (discordUser) {
                    const avatarUrl = `https://cdn.discordapp.com/avatars/${discordUser.id}/${discordUser.avatar}.png`;
                    if (discordPfpImg.src !== avatarUrl) {
                        discordPfpImg.src = avatarUrl;
                    }
                    
                    let statusColor = "bg-gray-500"; 
                    if (discordStatus === "online") statusColor = "bg-green-500";
                    if (discordStatus === "idle") statusColor = "bg-yellow-500";
                    if (discordStatus === "dnd") statusColor = "bg-red-500";
                    
                    discordStatusDot.className = `absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-black ${statusColor}`;
                }

                // Update Spotify
                if (spotify) {
                    spotifyContent.classList.remove('hidden');
                    spotifyIdle.classList.add('hidden');
                    spotifySong.textContent = spotify.song;
                    spotifyArtist.textContent = spotify.artist.replace(/;/g, ',');
                    if (spotifyArt.src !== spotify.album_art_url) {
                        spotifyArt.src = spotify.album_art_url;
                    }
                } else {
                    spotifyContent.classList.add('hidden');
                    spotifyIdle.classList.remove('hidden');
                }
            } catch (error) {
                console.error("Error fetching status:", error);
            }
        }

        // 4. VISIT COUNTER (YANG SUDAH DIPERBAIKI)
        // Kita ganti pakai counterapi.dev yang lebih stabil
        async function updateVisitCount() {
            try {
                // Endpoint API baru: counterapi.dev
                // '/up' artinya setiap kali di-fetch, angka bertambah 1
                const response = await fetch("https://api.counterapi.dev/v1/ursavior-profile/visits/up");
                const data = await response.json();
                
                // Di API baru ini, datanya ada di key 'count', bukan 'value'
                document.getElementById('visit-count').innerText = data.count;
            } catch (error) {
                console.error("Error counter:", error);
                document.getElementById('visit-count').innerText = "0"; // Default kalau error
            }
        }

        setInterval(updateStatus, 1000); 
        updateStatus();
        updateVisitCount(); // Jalankan counter saat web dibuka
    </script>
</body>
</html>
